<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trading Bot Dashboard</title>
    <!-- Replit style Bootstrap CSS -->
    <link href="https://cdn.replit.com/agent/bootstrap-agent-dark-theme.min.css" rel="stylesheet">
    <!-- Font Awesome icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Sidebar -->
            <div class="col-md-2 d-md-block sidebar p-0">
                <div class="position-sticky">
                    <div class="d-flex flex-column p-3 text-white sidebar-menu">
                        <a href="/" class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                            <i class="fas fa-robot me-2"></i>
                            <span class="fs-4">Trading Bot</span>
                        </a>
                        <hr>
                        <ul class="nav nav-pills flex-column mb-auto">
                            <li class="nav-item">
                                <a href="#" class="nav-link active" id="dashboard-tab" data-bs-toggle="pill" data-bs-target="#dashboard">
                                    <i class="fas fa-tachometer-alt me-2"></i>
                                    Dashboard
                                </a>
                            </li>
                            <li>
                                <a href="#" class="nav-link text-white" id="trades-tab" data-bs-toggle="pill" data-bs-target="#trades">
                                    <i class="fas fa-exchange-alt me-2"></i>
                                    Trades
                                </a>
                            </li>
                            <li>
                                <a href="#" class="nav-link text-white" id="positions-tab" data-bs-toggle="pill" data-bs-target="#positions">
                                    <i class="fas fa-chart-line me-2"></i>
                                    Positions
                                </a>
                            </li>
                            <li>
                                <a href="#" class="nav-link text-white" id="backtest-tab" data-bs-toggle="pill" data-bs-target="#backtest">
                                    <i class="fas fa-flask me-2"></i>
                                    Backtest
                                </a>
                            </li>
                            <li>
                                <a href="#" class="nav-link text-white" id="reports-tab" data-bs-toggle="pill" data-bs-target="#reports">
                                    <i class="fas fa-chart-pie me-2"></i>
                                    Reports
                                </a>
                            </li>
                            <li>
                                <a href="#" class="nav-link text-white" id="settings-tab" data-bs-toggle="pill" data-bs-target="#settings">
                                    <i class="fas fa-cog me-2"></i>
                                    Settings
                                </a>
                            </li>
                        </ul>
                        <hr>
                        <div class="bot-status-container">
                            <span class="status-label">Bot Status:</span>
                            <div class="status-indicator d-flex align-items-center">
                                <span class="status-dot {% if bot_running %}active{% endif %}"></span>
                                <span class="status-text ms-2">{{ 'Running' if bot_running else 'Stopped' }}</span>
                            </div>
                            <div class="bot-controls mt-3">
                                <button id="start-bot" class="btn btn-success btn-sm me-1" {% if bot_running %}disabled{% endif %}>
                                    <i class="fas fa-play"></i> Start
                                </button>
                                <button id="stop-bot" class="btn btn-danger btn-sm me-1" {% if not bot_running %}disabled{% endif %}>
                                    <i class="fas fa-stop"></i> Stop
                                </button>
                                <button id="restart-bot" class="btn btn-warning btn-sm">
                                    <i class="fas fa-sync-alt"></i> Restart
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main content -->
            <div class="col-md-10 ms-sm-auto px-md-4 py-4 main-content">
                <div class="tab-content" id="main-content">
                    <!-- Dashboard Tab -->
                    <div class="tab-pane fade show active" id="dashboard">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2"><i class="fas fa-tachometer-alt me-2"></i>Dashboard</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="btn-group me-2">
                                    <button type="button" class="btn btn-sm btn-outline-secondary">Share</button>
                                    <button type="button" class="btn btn-sm btn-outline-secondary">Export</button>
                                </div>
                                <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                                    <i class="fas fa-calendar me-1"></i>
                                    This week
                                </button>
                            </div>
                        </div>

                        <!-- Performance Summary Cards -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-primary">Balance</h5>
                                        <div class="d-flex align-items-center">
                                            <h2 class="mb-0">${{ current_balance }}</h2>
                                            <span class="ms-2 badge {{ 'bg-success' if profit_percentage >= 0 else 'bg-danger' }}">
                                                <i class="fas {{ 'fa-arrow-up' if profit_percentage >= 0 else 'fa-arrow-down' }}"></i>
                                                {{ profit_percentage|abs }}%
                                            </span>
                                        </div>
                                        <small class="text-muted">Initial: ${{ initial_balance }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-info">Win Rate</h5>
                                        <div class="d-flex align-items-center">
                                            <h2 class="mb-0">{{ win_rate }}%</h2>
                                            <div class="ms-3 progress flex-grow-1" style="height: 8px;">
                                                <div class="progress-bar bg-info" role="progressbar" style="width: {{ win_rate }}%"></div>
                                            </div>
                                        </div>
                                        <small class="text-muted">{{ winning_trades }}/{{ total_trades }} trades</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-warning">Risk/Reward</h5>
                                        <div class="d-flex align-items-center">
                                            <h2 class="mb-0">{{ risk_reward_ratio }}</h2>
                                            <span class="ms-2 badge {{ 'bg-success' if risk_reward_ratio >= 1.5 else 'bg-secondary' }}">
                                                <i class="fas fa-chart-line"></i>
                                            </span>
                                        </div>
                                        <small class="text-muted">Profit Factor: {{ profit_factor }}</small>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body">
                                        <h5 class="card-title text-danger">Max Drawdown</h5>
                                        <div class="d-flex align-items-center">
                                            <h2 class="mb-0">{{ max_drawdown_percent }}%</h2>
                                            <span class="ms-2 badge {{ 'bg-success' if max_drawdown_percent < 10 else 'bg-warning' if max_drawdown_percent < 25 else 'bg-danger' }}">
                                                <i class="fas fa-chart-area"></i>
                                            </span>
                                        </div>
                                        <small class="text-muted">Recovery factor: {{ recovery_factor|default('N/A') }}</small>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Charts Row -->
                        <div class="row mb-4">
                            <div class="col-md-8">
                                <div class="card shadow-sm">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">Equity Curve</h5>
                                        <div class="btn-group btn-group-sm">
                                            <button type="button" class="btn btn-outline-secondary active">1D</button>
                                            <button type="button" class="btn btn-outline-secondary">1W</button>
                                            <button type="button" class="btn btn-outline-secondary">1M</button>
                                            <button type="button" class="btn btn-outline-secondary">All</button>
                                        </div>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="equityCurveChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card shadow-sm">
                                    <div class="card-header">
                                        <h5 class="mb-0">Performance Metrics</h5>
                                    </div>
                                    <div class="card-body">
                                        <canvas id="performanceRadarChart" height="250"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Open Positions & Recent Trades -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card shadow-sm">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">Open Positions</h5>
                                        <a href="#" class="btn btn-sm btn-outline-primary" id="view-all-positions">
                                            View All
                                        </a>
                                    </div>
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover mb-0">
                                                <thead>
                                                    <tr>
                                                        <th>Symbol</th>
                                                        <th>Type</th>
                                                        <th>Entry</th>
                                                        <th>Current</th>
                                                        <th>PnL</th>
                                                        <th>Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for position in open_positions[:3] %}
                                                    <tr>
                                                        <td>{{ position.symbol }}</td>
                                                        <td>
                                                            <span class="badge {{ 'bg-success' if position.type == 'LONG' else 'bg-danger' }}">
                                                                {{ position.type }}
                                                            </span>
                                                        </td>
                                                        <td>${{ position.entry_price }}</td>
                                                        <td>${{ position.current_price }}</td>
                                                        <td class="{{ 'text-success' if position.pnl >= 0 else 'text-danger' }}">
                                                            ${{ position.pnl }} ({{ position.pnl_percent }}%)
                                                        </td>
                                                        <td>
                                                            <button class="btn btn-sm btn-danger close-position-btn" data-position-id="{{ position.id }}">
                                                                <i class="fas fa-times-circle"></i> Close
                                                            </button>
                                                        </td>
                                                    </tr>
                                                    {% else %}
                                                    <tr>
                                                        <td colspan="6" class="text-center">No open positions</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card shadow-sm">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">Recent Trades</h5>
                                        <a href="#" class="btn btn-sm btn-outline-primary" id="view-all-trades">
                                            View All
                                        </a>
                                    </div>
                                    <div class="card-body p-0">
                                        <div class="table-responsive">
                                            <table class="table table-striped table-hover mb-0">
                                                <thead>
                                                    <tr>
                                                        <th>Symbol</th>
                                                        <th>Type</th>
                                                        <th>Entry/Exit</th>
                                                        <th>PnL</th>
                                                        <th>Time</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    {% for trade in closed_positions[:3] %}
                                                    <tr>
                                                        <td>{{ trade.symbol }}</td>
                                                        <td>
                                                            <span class="badge {{ 'bg-success' if trade.type == 'LONG' else 'bg-danger' }}">
                                                                {{ trade.type }}
                                                            </span>
                                                        </td>
                                                        <td>${{ trade.entry_price }} â†’ ${{ trade.exit_price }}</td>
                                                        <td class="{{ 'text-success' if trade.pnl >= 0 else 'text-danger' }}">
                                                            ${{ trade.pnl }} ({{ trade.pnl_percent }}%)
                                                        </td>
                                                        <td>{{ trade.exit_time }}</td>
                                                    </tr>
                                                    {% else %}
                                                    <tr>
                                                        <td colspan="5" class="text-center">No closed trades</td>
                                                    </tr>
                                                    {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Market Analysis & Trading Signals -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card shadow-sm">
                                    <div class="card-header">
                                        <h5 class="mb-0">Market Analysis</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="market-overview mb-3">
                                            <h6>BTC/USDT Market Regime</h6>
                                            <div class="d-flex align-items-center">
                                                <div class="market-regime-indicator {{ market_regime|lower }}">
                                                    {{ market_regime|default('Neutral') }}
                                                </div>
                                                <div class="ms-auto">
                                                    <small class="text-muted">Volatility: {{ volatility|default('Medium') }}</small>
                                                </div>
                                            </div>
                                            <div class="progress mt-2 mb-3" style="height: 5px;">
                                                <div class="progress-bar bg-info" role="progressbar" 
                                                     style="width: {{ trend_strength|default(50) }}%"></div>
                                            </div>
                                        </div>
                                        <div class="key-levels">
                                            <div class="d-flex justify-content-between">
                                                <div>
                                                    <h6>Support Levels</h6>
                                                    <ul class="list-unstyled">
                                                        <li class="text-success">$68,500</li>
                                                        <li class="text-success">$67,200</li>
                                                        <li class="text-success">$65,800</li>
                                                    </ul>
                                                </div>
                                                <div>
                                                    <h6>Resistance Levels</h6>
                                                    <ul class="list-unstyled">
                                                        <li class="text-danger">$75,800</li>
                                                        <li class="text-danger">$77,200</li>
                                                        <li class="text-danger">$80,000</li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card shadow-sm">
                                    <div class="card-header">
                                        <h5 class="mb-0">Trading Signals</h5>
                                    </div>
                                    <div class="card-body">
                                        <div class="mb-3">
                                            <div class="d-flex justify-content-between">
                                                <h6>Composite Signal</h6>
                                                <div class="signal-strength">
                                                    <span class="badge {{ 'bg-success' if composite_score > 0.5 else 'bg-danger' if composite_score < -0.5 else 'bg-secondary' }}">
                                                        {% if composite_score > 0.5 %}
                                                            Strong Buy
                                                        {% elif composite_score > 0 %}
                                                            Buy
                                                        {% elif composite_score > -0.5 %}
                                                            Sell
                                                        {% else %}
                                                            Strong Sell
                                                        {% endif %}
                                                    </span>
                                                </div>
                                            </div>
                                            <div class="progress mt-2" style="height: 10px;">
                                                <div class="progress-bar {{ 'bg-success' if composite_score > 0 else 'bg-danger' }}" 
                                                     role="progressbar" 
                                                     style="width: {{ (composite_score + 1) * 50 }}%"></div>
                                            </div>
                                        </div>
                                        <div class="indicators-breakdown">
                                            <h6>Indicators</h6>
                                            <ul class="list-group signal-list">
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    RSI (14)
                                                    <span class="badge bg-success">Buy</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    MACD
                                                    <span class="badge bg-danger">Sell</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    Bollinger Bands
                                                    <span class="badge bg-warning text-dark">Neutral</span>
                                                </li>
                                                <li class="list-group-item d-flex justify-content-between align-items-center">
                                                    EMA Cross (50/200)
                                                    <span class="badge bg-success">Buy</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Trades Tab -->
                    <div class="tab-pane fade" id="trades">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2"><i class="fas fa-exchange-alt me-2"></i>Trade History</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <div class="input-group me-2">
                                    <input type="text" class="form-control" placeholder="Search...">
                                    <button class="btn btn-outline-secondary" type="button">
                                        <i class="fas fa-search"></i>
                                    </button>
                                </div>
                                <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                                    <i class="fas fa-filter me-1"></i>
                                    Filter
                                </button>
                            </div>
                        </div>

                        <!-- Trade History Table -->
                        <div class="card shadow-sm">
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover mb-0">
                                        <thead>
                                            <tr>
                                                <th>ID</th>
                                                <th>Symbol</th>
                                                <th>Type</th>
                                                <th>Entry Price</th>
                                                <th>Exit Price</th>
                                                <th>Quantity</th>
                                                <th>P&L</th>
                                                <th>Entry Time</th>
                                                <th>Exit Time</th>
                                                <th>Exit Reason</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for trade in closed_positions %}
                                            <tr>
                                                <td>{{ trade.id }}</td>
                                                <td>{{ trade.symbol }}</td>
                                                <td>
                                                    <span class="badge {{ 'bg-success' if trade.type == 'LONG' else 'bg-danger' }}">
                                                        {{ trade.type }}
                                                    </span>
                                                </td>
                                                <td>${{ trade.entry_price }}</td>
                                                <td>${{ trade.exit_price }}</td>
                                                <td>{{ trade.quantity }}</td>
                                                <td class="{{ 'text-success' if trade.pnl >= 0 else 'text-danger' }}">
                                                    ${{ trade.pnl }} ({{ trade.pnl_percent }}%)
                                                </td>
                                                <td>{{ trade.entry_time }}</td>
                                                <td>{{ trade.exit_time }}</td>
                                                <td>
                                                    <span class="badge {{ 
                                                        'bg-success' if trade.exit_reason == 'take_profit' 
                                                        else 'bg-danger' if trade.exit_reason == 'stop_loss'
                                                        else 'bg-info' }}">
                                                        {{ trade.exit_reason }}
                                                    </span>
                                                </td>
                                            </tr>
                                            {% else %}
                                            <tr>
                                                <td colspan="10" class="text-center">No trade history</td>
                                            </tr>
                                            {% endfor %}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <div class="card-footer">
                                <nav aria-label="Page navigation">
                                    <ul class="pagination justify-content-center mb-0">
                                        <li class="page-item disabled">
                                            <a class="page-link" href="#" tabindex="-1">Previous</a>
                                        </li>
                                        <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                                        <li class="page-item">
                                            <a class="page-link" href="#">Next</a>
                                        </li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                    </div>

                    <!-- Positions Tab -->
                    <div class="tab-pane fade" id="positions">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2"><i class="fas fa-chart-line me-2"></i>Open Positions</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <button type="button" class="btn btn-sm btn-outline-primary me-2">
                                    <i class="fas fa-plus me-1"></i>
                                    New Position
                                </button>
                                <button type="button" class="btn btn-sm btn-outline-secondary dropdown-toggle">
                                    <i class="fas fa-sort me-1"></i>
                                    Sort
                                </button>
                            </div>
                        </div>

                        <!-- Open Positions Cards -->
                        <div class="row">
                            {% for position in open_positions %}
                            <div class="col-md-4 mb-4">
                                <div class="card shadow-sm position-card {{ 'border-success' if position.pnl >= 0 else 'border-danger' }}">
                                    <div class="card-header d-flex justify-content-between align-items-center">
                                        <h5 class="mb-0">{{ position.symbol }}</h5>
                                        <span class="badge {{ 'bg-success' if position.type == 'LONG' else 'bg-danger' }}">
                                            {{ position.type }}
                                        </span>
                                    </div>
                                    <div class="card-body">
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <div class="text-muted small">Entry Price</div>
                                                <div class="fw-bold">${{ position.entry_price }}</div>
                                            </div>
                                            <div class="col-6">
                                                <div class="text-muted small">Current Price</div>
                                                <div class="fw-bold">${{ position.current_price }}</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <div class="text-muted small">Quantity</div>
                                                <div class="fw-bold">{{ position.quantity }}</div>
                                            </div>
                                            <div class="col-6">
                                                <div class="text-muted small">Leverage</div>
                                                <div class="fw-bold">{{ position.leverage }}x</div>
                                            </div>
                                        </div>
                                        <div class="row mb-3">
                                            <div class="col-6">
                                                <div class="text-muted small">Stop Loss</div>
                                                <div class="fw-bold text-danger">${{ position.stop_loss }}</div>
                                            </div>
                                            <div class="col-6">
                                                <div class="text-muted small">Take Profit</div>
                                                <div class="fw-bold text-success">${{ position.take_profit }}</div>
                                            </div>
                                        </div>
                                        <div class="profit-loss-bar mb-3">
                                            <div class="d-flex justify-content-between mb-1">
                                                <small>P&L</small>
                                                <small class="{{ 'text-success' if position.pnl >= 0 else 'text-danger' }}">
                                                    ${{ position.pnl }} ({{ position.pnl_percent }}%)
                                                </small>
                                            </div>
                                            <div class="progress" style="height: 10px;">
                                                <div class="progress-bar {{ 'bg-success' if position.pnl >= 0 else 'bg-danger' }}" 
                                                     role="progressbar" 
                                                     style="width: {{ position.pnl_percent|abs if position.pnl_percent|abs < 100 else 100 }}%"></div>
                                            </div>
                                        </div>
                                        <div class="d-grid gap-2">
                                            <button class="btn btn-danger close-position-btn" data-position-id="{{ position.id }}">
                                                <i class="fas fa-times-circle me-1"></i> Close Position
                                            </button>
                                        </div>
                                    </div>
                                    <div class="card-footer text-muted small">
                                        Opened: {{ position.entry_time }}
                                    </div>
                                </div>
                            </div>
                            {% else %}
                            <div class="col-12">
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    No open positions at the moment.
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>

                    <!-- Backtest Tab -->
                    <div class="tab-pane fade" id="backtest">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2"><i class="fas fa-flask me-2"></i>Backtest</h1>
                        </div>
                        
                        <!-- Backtest Form -->
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card shadow-sm mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">Backtest Parameters</h5>
                                    </div>
                                    <div class="card-body">
                                        <form id="backtest-form">
                                            <div class="mb-3">
                                                <label for="symbol" class="form-label">Symbol</label>
                                                <select class="form-select" id="symbol" required>
                                                    <option value="BTCUSDT">BTC/USDT</option>
                                                    <option value="ETHUSDT">ETH/USDT</option>
                                                    <option value="BNBUSDT">BNB/USDT</option>
                                                    <option value="SOLUSDT">SOL/USDT</option>
                                                    <option value="ADAUSDT">ADA/USDT</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="timeframe" class="form-label">Timeframe</label>
                                                <select class="form-select" id="timeframe" required>
                                                    <option value="5m">5 minutes</option>
                                                    <option value="15m">15 minutes</option>
                                                    <option value="1h" selected>1 hour</option>
                                                    <option value="4h">4 hours</option>
                                                    <option value="1d">1 day</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="strategy" class="form-label">Strategy</label>
                                                <select class="form-select" id="strategy" required>
                                                    <option value="auto">Auto (Regime-based)</option>
                                                    <option value="rsi">RSI</option>
                                                    <option value="macd">MACD</option>
                                                    <option value="bbands">Bollinger Bands</option>
                                                    <option value="ema_cross">EMA Cross</option>
                                                    <option value="mtf">Multi-timeframe</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="initial_balance" class="form-label">Initial Balance</label>
                                                <div class="input-group">
                                                    <span class="input-group-text">$</span>
                                                    <input type="number" class="form-control" id="initial_balance" value="10000" min="100" required>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="start_date" class="form-label">Start Date</label>
                                                <input type="date" class="form-control" id="start_date" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="end_date" class="form-label">End Date</label>
                                                <input type="date" class="form-control" id="end_date" required>
                                            </div>
                                            <div class="mb-3">
                                                <div class="form-check form-switch">
                                                    <input class="form-check-input" type="checkbox" id="use_leverage">
                                                    <label class="form-check-label" for="use_leverage">Use Leverage</label>
                                                </div>
                                            </div>
                                            <div class="mb-3 leverage-options d-none">
                                                <label for="leverage" class="form-label">Leverage</label>
                                                <select class="form-select" id="leverage">
                                                    <option value="2">2x</option>
                                                    <option value="5">5x</option>
                                                    <option value="10">10x</option>
                                                    <option value="20">20x</option>
                                                </select>
                                            </div>
                                            <div class="d-grid gap-2">
                                                <button type="submit" class="btn btn-primary">
                                                    <i class="fas fa-play me-1"></i>
                                                    Run Backtest
                                                </button>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-8">
                                <div class="card shadow-sm mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">Backtest Results</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="backtest-results">
                                            <div class="text-center py-5">
                                                <i class="fas fa-flask fa-3x mb-3 text-muted"></i>
                                                <p>Run a backtest to see results here</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card shadow-sm mb-4">
                                    <div class="card-header">
                                        <h5 class="mb-0">Performance Metrics</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="performance-metrics">
                                            <!-- Performance metrics will be displayed here after backtest -->
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="card shadow-sm">
                                    <div class="card-header">
                                        <h5 class="mb-0">Trade List</h5>
                                    </div>
                                    <div class="card-body">
                                        <div id="backtest-trades">
                                            <!-- Trade list will be displayed here after backtest -->
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Reports Tab -->
                    <div class="tab-pane fade" id="reports">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2"><i class="fas fa-chart-pie me-2"></i>Reports</h1>
                            <div class="btn-toolbar mb-2 mb-md-0">
                                <button type="button" class="btn btn-sm btn-outline-primary me-2" id="generate-report-btn">
                                    <i class="fas fa-file-export me-1"></i>
                                    Generate Report
                                </button>
                                <div class="dropdown">
                                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button" id="exportDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                        <i class="fas fa-download me-1"></i>
                                        Export
                                    </button>
                                    <ul class="dropdown-menu" aria-labelledby="exportDropdown">
                                        <li><a class="dropdown-item" href="#">PDF</a></li>
                                        <li><a class="dropdown-item" href="#">Excel</a></li>
                                        <li><a class="dropdown-item" href="#">CSV</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Report Types -->
                        <div class="row mb-4">
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body text-center report-card">
                                        <i class="fas fa-chart-line fa-3x mb-3 text-primary"></i>
                                        <h5>Performance Report</h5>
                                        <p class="text-muted">Detailed analysis of trading performance</p>
                                        <button class="btn btn-primary btn-sm">Generate</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body text-center report-card">
                                        <i class="fas fa-exchange-alt fa-3x mb-3 text-success"></i>
                                        <h5>Trade Analysis</h5>
                                        <p class="text-muted">Detailed insights on your trading patterns</p>
                                        <button class="btn btn-primary btn-sm">Generate</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body text-center report-card">
                                        <i class="fas fa-balance-scale fa-3x mb-3 text-warning"></i>
                                        <h5>Risk Assessment</h5>
                                        <p class="text-muted">Analysis of your trading risk factors</p>
                                        <button class="btn btn-primary btn-sm">Generate</button>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-3">
                                <div class="card shadow-sm">
                                    <div class="card-body text-center report-card">
                                        <i class="fas fa-clock fa-3x mb-3 text-info"></i>
                                        <h5>Daily Summary</h5>
                                        <p class="text-muted">Daily overview of your trading activity</p>
                                        <button class="btn btn-primary btn-sm">Generate</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Generated Reports -->
                        <div class="card shadow-sm">
                            <div class="card-header">
                                <h5 class="mb-0">Saved Reports</h5>
                            </div>
                            <div class="card-body p-0">
                                <div class="table-responsive">
                                    <table class="table table-striped table-hover mb-0">
                                        <thead>
                                            <tr>
                                                <th>Report Name</th>
                                                <th>Type</th>
                                                <th>Date Generated</th>
                                                <th>Size</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>Performance_Report_20250301</td>
                                                <td>
                                                    <span class="badge bg-primary">Performance</span>
                                                </td>
                                                <td>2025-03-01</td>
                                                <td>1.2 MB</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary me-1">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Trade_Analysis_20250228</td>
                                                <td>
                                                    <span class="badge bg-success">Trade Analysis</span>
                                                </td>
                                                <td>2025-02-28</td>
                                                <td>845 KB</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary me-1">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Risk_Assessment_20250227</td>
                                                <td>
                                                    <span class="badge bg-warning text-dark">Risk Assessment</span>
                                                </td>
                                                <td>2025-02-27</td>
                                                <td>620 KB</td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary me-1">
                                                        <i class="fas fa-eye"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-secondary me-1">
                                                        <i class="fas fa-download"></i>
                                                    </button>
                                                    <button class="btn btn-sm btn-outline-danger">
                                                        <i class="fas fa-trash"></i>
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Settings Tab -->
                    <div class="tab-pane fade" id="settings">
                        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                            <h1 class="h2"><i class="fas fa-cog me-2"></i>Settings</h1>
                            <button id="save-settings" class="btn btn-primary">
                                <i class="fas fa-save me-1"></i>
                                Save Settings
                            </button>
                        </div>
                        
                        <!-- Settings Tabs -->
                        <div class="row">
                            <div class="col-md-3">
                                <div class="list-group mb-4" id="settings-tab-list" role="tablist">
                                    <a class="list-group-item list-group-item-action active" id="general-tab" data-bs-toggle="list" href="#general" role="tab">
                                        <i class="fas fa-cog me-2"></i>
                                        General
                                    </a>
                                    <a class="list-group-item list-group-item-action" id="strategies-tab" data-bs-toggle="list" href="#strategies" role="tab">
                                        <i class="fas fa-chess me-2"></i>
                                        Strategies
                                    </a>
                                    <a class="list-group-item list-group-item-action" id="api-tab" data-bs-toggle="list" href="#api" role="tab">
                                        <i class="fas fa-key me-2"></i>
                                        API Settings
                                    </a>
                                    <a class="list-group-item list-group-item-action" id="notifications-tab" data-bs-toggle="list" href="#notifications" role="tab">
                                        <i class="fas fa-bell me-2"></i>
                                        Notifications
                                    </a>
                                    <a class="list-group-item list-group-item-action" id="risk-tab" data-bs-toggle="list" href="#risk" role="tab">
                                        <i class="fas fa-shield-alt me-2"></i>
                                        Risk Management
                                    </a>
                                    <a class="list-group-item list-group-item-action" id="about-tab" data-bs-toggle="list" href="#about" role="tab">
                                        <i class="fas fa-info-circle me-2"></i>
                                        About
                                    </a>
                                </div>
                            </div>
                            <div class="col-md-9">
                                <div class="tab-content" id="settings-tab-content">
                                    <!-- General Settings -->
                                    <div class="tab-pane fade show active" id="general" role="tabpanel">
                                        <div class="card shadow-sm">
                                            <div class="card-header">
                                                <h5 class="mb-0">General Settings</h5>
                                            </div>
                                            <div class="card-body">
                                                <form>
                                                    <div class="mb-3">
                                                        <label for="bot_name" class="form-label">Bot Name</label>
                                                        <input type="text" class="form-control" id="bot_name" value="BinanceTrader Bot">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="default_symbol" class="form-label">Default Symbol</label>
                                                        <select class="form-select" id="default_symbol">
                                                            <option value="BTCUSDT" selected>BTC/USDT</option>
                                                            <option value="ETHUSDT">ETH/USDT</option>
                                                            <option value="BNBUSDT">BNB/USDT</option>
                                                        </select>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="default_timeframe" class="form-label">Default Timeframe</label>
                                                        <select class="form-select" id="default_timeframe">
                                                            <option value="5m">5 minutes</option>
                                                            <option value="15m">15 minutes</option>
                                                            <option value="1h" selected>1 hour</option>
                                                            <option value="4h">4 hours</option>
                                                            <option value="1d">1 day</option>
                                                        </select>
                                                    </div>
                                                    <div class="mb-3">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="auto_start" checked>
                                                            <label class="form-check-label" for="auto_start">Auto-start Bot</label>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="auto_restart" checked>
                                                            <label class="form-check-label" for="auto_restart">Auto-restart on Crash</label>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="test_mode" checked>
                                                            <label class="form-check-label" for="test_mode">Test Mode (Testnet)</label>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Strategies Settings -->
                                    <div class="tab-pane fade" id="strategies" role="tabpanel">
                                        <div class="card shadow-sm">
                                            <div class="card-header">
                                                <h5 class="mb-0">Strategy Settings</h5>
                                            </div>
                                            <div class="card-body">
                                                <div class="mb-4">
                                                    <h6>Active Strategy</h6>
                                                    <select class="form-select" id="active_strategy">
                                                        <option value="auto" selected>Auto (Regime-based)</option>
                                                        <option value="rsi">RSI</option>
                                                        <option value="macd">MACD</option>
                                                        <option value="bbands">Bollinger Bands</option>
                                                        <option value="ema_cross">EMA Cross</option>
                                                        <option value="custom">Custom Strategy</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="accordion" id="strategyAccordion">
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="headingRSI">
                                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseRSI" aria-expanded="false" aria-controls="collapseRSI">
                                                                RSI Strategy Settings
                                                            </button>
                                                        </h2>
                                                        <div id="collapseRSI" class="accordion-collapse collapse" aria-labelledby="headingRSI" data-bs-parent="#strategyAccordion">
                                                            <div class="accordion-body">
                                                                <form>
                                                                    <div class="mb-3">
                                                                        <label for="rsi_period" class="form-label">RSI Period</label>
                                                                        <input type="number" class="form-control" id="rsi_period" value="14">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="rsi_overbought" class="form-label">Overbought Level</label>
                                                                        <input type="number" class="form-control" id="rsi_overbought" value="70">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="rsi_oversold" class="form-label">Oversold Level</label>
                                                                        <input type="number" class="form-control" id="rsi_oversold" value="30">
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="headingMACD">
                                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMACD" aria-expanded="false" aria-controls="collapseMACD">
                                                                MACD Strategy Settings
                                                            </button>
                                                        </h2>
                                                        <div id="collapseMACD" class="accordion-collapse collapse" aria-labelledby="headingMACD" data-bs-parent="#strategyAccordion">
                                                            <div class="accordion-body">
                                                                <form>
                                                                    <div class="mb-3">
                                                                        <label for="macd_fast" class="form-label">Fast Period</label>
                                                                        <input type="number" class="form-control" id="macd_fast" value="12">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="macd_slow" class="form-label">Slow Period</label>
                                                                        <input type="number" class="form-control" id="macd_slow" value="26">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="macd_signal" class="form-label">Signal Period</label>
                                                                        <input type="number" class="form-control" id="macd_signal" value="9">
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="headingBBands">
                                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseBBands" aria-expanded="false" aria-controls="collapseBBands">
                                                                Bollinger Bands Strategy Settings
                                                            </button>
                                                        </h2>
                                                        <div id="collapseBBands" class="accordion-collapse collapse" aria-labelledby="headingBBands" data-bs-parent="#strategyAccordion">
                                                            <div class="accordion-body">
                                                                <form>
                                                                    <div class="mb-3">
                                                                        <label for="bb_period" class="form-label">Period</label>
                                                                        <input type="number" class="form-control" id="bb_period" value="20">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="bb_std" class="form-label">Standard Deviation</label>
                                                                        <input type="number" class="form-control" id="bb_std" value="2" step="0.1">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <div class="form-check form-switch">
                                                                            <input class="form-check-input" type="checkbox" id="bb_use_middle" checked>
                                                                            <label class="form-check-label" for="bb_use_middle">Use Middle Band for Trend</label>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="accordion-item">
                                                        <h2 class="accordion-header" id="headingEMA">
                                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEMA" aria-expanded="false" aria-controls="collapseEMA">
                                                                EMA Cross Strategy Settings
                                                            </button>
                                                        </h2>
                                                        <div id="collapseEMA" class="accordion-collapse collapse" aria-labelledby="headingEMA" data-bs-parent="#strategyAccordion">
                                                            <div class="accordion-body">
                                                                <form>
                                                                    <div class="mb-3">
                                                                        <label for="ema_fast" class="form-label">Fast EMA Period</label>
                                                                        <input type="number" class="form-control" id="ema_fast" value="50">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <label for="ema_slow" class="form-label">Slow EMA Period</label>
                                                                        <input type="number" class="form-control" id="ema_slow" value="200">
                                                                    </div>
                                                                    <div class="mb-3">
                                                                        <div class="form-check form-switch">
                                                                            <input class="form-check-input" type="checkbox" id="ema_use_confirmation" checked>
                                                                            <label class="form-check-label" for="ema_use_confirmation">Require Confirmation Candle</label>
                                                                        </div>
                                                                    </div>
                                                                </form>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- API Settings -->
                                    <div class="tab-pane fade" id="api" role="tabpanel">
                                        <div class="card shadow-sm">
                                            <div class="card-header">
                                                <h5 class="mb-0">API Settings</h5>
                                            </div>
                                            <div class="card-body">
                                                <form>
                                                    <div class="mb-3">
                                                        <label for="binance_api_key" class="form-label">Binance API Key</label>
                                                        <div class="input-group">
                                                            <input type="password" class="form-control" id="binance_api_key" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                                            <button class="btn btn-outline-secondary" type="button">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="binance_api_secret" class="form-label">Binance API Secret</label>
                                                        <div class="input-group">
                                                            <input type="password" class="form-control" id="binance_api_secret" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                                            <button class="btn btn-outline-secondary" type="button">
                                                                <i class="fas fa-eye"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="use_testnet" checked>
                                                            <label class="form-check-label" for="use_testnet">Use Testnet</label>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <button type="button" class="btn btn-primary" id="test-api-btn">
                                                            <i class="fas fa-key me-1"></i>
                                                            Test API Connection
                                                        </button>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Notification Settings -->
                                    <div class="tab-pane fade" id="notifications" role="tabpanel">
                                        <div class="card shadow-sm">
                                            <div class="card-header">
                                                <h5 class="mb-0">Notification Settings</h5>
                                            </div>
                                            <div class="card-body">
                                                <form>
                                                    <div class="mb-3">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="enable_notifications" checked>
                                                            <label class="form-check-label" for="enable_notifications">Enable Notifications</label>
                                                        </div>
                                                    </div>
                                                    
                                                    <div class="mb-4">
                                                        <h6>Telegram Notifications</h6>
                                                        <div class="form-check form-switch mb-2">
                                                            <input class="form-check-input" type="checkbox" id="enable_telegram" checked>
                                                            <label class="form-check-label" for="enable_telegram">Enable Telegram</label>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="telegram_bot_token" class="form-label">Telegram Bot Token</label>
                                                            <input type="text" class="form-control" id="telegram_bot_token" value="8069189803:AAF3PJc3BNQgZmpQ2Oj7o0-ySJGmi2AQ9OM">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="telegram_chat_id" class="form-label">Telegram Chat ID</label>
                                                            <input type="text" class="form-control" id="telegram_chat_id" value="1834332146">
                                                        </div>
                                                        <button type="button" class="btn btn-primary btn-sm" id="test-telegram-btn">
                                                            <i class="fab fa-telegram-plane me-1"></i>
                                                            Test Telegram
                                                        </button>
                                                    </div>
                                                    
                                                    <div class="mb-4">
                                                        <h6>Email Notifications</h6>
                                                        <div class="form-check form-switch mb-2">
                                                            <input class="form-check-input" type="checkbox" id="enable_email">
                                                            <label class="form-check-label" for="enable_email">Enable Email</label>
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="email_address" class="form-label">Email Address</label>
                                                            <input type="email" class="form-control" id="email_address" value="tranbao13061988@gmail.com">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="smtp_server" class="form-label">SMTP Server</label>
                                                            <input type="text" class="form-control" id="smtp_server" value="smtp.gmail.com">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="smtp_port" class="form-label">SMTP Port</label>
                                                            <input type="number" class="form-control" id="smtp_port" value="587">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="smtp_username" class="form-label">SMTP Username</label>
                                                            <input type="text" class="form-control" id="smtp_username" value="tranbao13061988@gmail.com">
                                                        </div>
                                                        <div class="mb-3">
                                                            <label for="smtp_password" class="form-label">SMTP Password</label>
                                                            <input type="password" class="form-control" id="smtp_password" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                                                        </div>
                                                        <button type="button" class="btn btn-primary btn-sm" id="test-email-btn">
                                                            <i class="fas fa-envelope me-1"></i>
                                                            Test Email
                                                        </button>
                                                    </div>
                                                    
                                                    <div class="mb-4">
                                                        <h6>Notification Events</h6>
                                                        <div class="form-check mb-2">
                                                            <input class="form-check-input" type="checkbox" id="notify_trade_open" checked>
                                                            <label class="form-check-label" for="notify_trade_open">Trade Opened</label>
                                                        </div>
                                                        <div class="form-check mb-2">
                                                            <input class="form-check-input" type="checkbox" id="notify_trade_close" checked>
                                                            <label class="form-check-label" for="notify_trade_close">Trade Closed</label>
                                                        </div>
                                                        <div class="form-check mb-2">
                                                            <input class="form-check-input" type="checkbox" id="notify_error" checked>
                                                            <label class="form-check-label" for="notify_error">Errors</label>
                                                        </div>
                                                        <div class="form-check mb-2">
                                                            <input class="form-check-input" type="checkbox" id="notify_daily_report" checked>
                                                            <label class="form-check-label" for="notify_daily_report">Daily Report</label>
                                                        </div>
                                                        <div class="form-check mb-2">
                                                            <input class="form-check-input" type="checkbox" id="notify_signal" checked>
                                                            <label class="form-check-label" for="notify_signal">Trading Signals</label>
                                                        </div>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- Risk Management Settings -->
                                    <div class="tab-pane fade" id="risk" role="tabpanel">
                                        <div class="card shadow-sm">
                                            <div class="card-header">
                                                <h5 class="mb-0">Risk Management Settings</h5>
                                            </div>
                                            <div class="card-body">
                                                <form>
                                                    <div class="mb-3">
                                                        <label for="max_risk_per_trade" class="form-label">Maximum Risk Per Trade (%)</label>
                                                        <input type="number" class="form-control" id="max_risk_per_trade" value="1" min="0.1" max="10" step="0.1">
                                                        <small class="text-muted">Percentage of your account balance to risk on each trade</small>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="position_sizing_method" class="form-label">Position Sizing Method</label>
                                                        <select class="form-select" id="position_sizing_method">
                                                            <option value="fixed_risk">Fixed Risk</option>
                                                            <option value="dynamic" selected>Dynamic (ATR-based)</option>
                                                            <option value="kelly_criterion">Kelly Criterion</option>
                                                            <option value="anti_martingale">Anti-Martingale</option>
                                                        </select>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="max_open_positions" class="form-label">Maximum Open Positions</label>
                                                        <input type="number" class="form-control" id="max_open_positions" value="5" min="1" max="20">
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="max_drawdown" class="form-label">Maximum Drawdown (%)</label>
                                                        <input type="number" class="form-control" id="max_drawdown" value="20" min="5" max="50">
                                                        <small class="text-muted">Stop trading when drawdown exceeds this percentage</small>
                                                    </div>
                                                    <div class="mb-3">
                                                        <div class="form-check form-switch">
                                                            <input class="form-check-input" type="checkbox" id="use_trailing_stop" checked>
                                                            <label class="form-check-label" for="use_trailing_stop">Use Trailing Stop</label>
                                                        </div>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="trailing_stop_activation" class="form-label">Trailing Stop Activation (%)</label>
                                                        <input type="number" class="form-control" id="trailing_stop_activation" value="1" min="0.1" max="10" step="0.1">
                                                        <small class="text-muted">Activate trailing stop when profit reaches this percentage</small>
                                                    </div>
                                                    <div class="mb-3">
                                                        <label for="trailing_stop_callback" class="form-label">Trailing Stop Callback (%)</label>
                                                        <input type="number" class="form-control" id="trailing_stop_callback" value="0.5" min="0.1" max="5" step="0.1">
                                                        <small class="text-muted">Distance from highest/lowest price for trailing stop</small>
                                                    </div>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- About Tab -->
                                    <div class="tab-pane fade" id="about" role="tabpanel">
                                        <div class="card shadow-sm">
                                            <div class="card-header">
                                                <h5 class="mb-0">About</h5>
                                            </div>
                                            <div class="card-body text-center">
                                                <img src="{{ url_for('static', filename='img/logo.png') }}" alt="Logo" class="img-fluid mb-3" style="max-width: 150px;">
                                                <h4>BinanceTrader Bot</h4>
                                                <p class="text-muted">Version 2.0.0</p>
                                                <p>A sophisticated cryptocurrency trading bot with adaptive strategies and risk management</p>
                                                <div class="d-flex justify-content-center gap-3 mb-3">
                                                    <a href="#" class="btn btn-outline-primary btn-sm">
                                                        <i class="fab fa-github me-1"></i>
                                                        GitHub
                                                    </a>
                                                    <a href="#" class="btn btn-outline-secondary btn-sm">
                                                        <i class="fas fa-book me-1"></i>
                                                        Documentation
                                                    </a>
                                                    <a href="#" class="btn btn-outline-info btn-sm">
                                                        <i class="fas fa-question-circle me-1"></i>
                                                        Support
                                                    </a>
                                                </div>
                                                <hr>
                                                <p><small>Â© 2025 BinanceTrader Bot. All rights reserved.</small></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Socket.io -->
    <script src="https://cdn.socket.io/4.5.0/socket.io.min.js"></script>
    <!-- Custom JS -->
    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
    <script>
        // Sample data for charts (will be replaced with real data from server)
        const equityData = {
            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'],
            datasets: [
                {
                    label: 'Equity',
                    data: [10000, 10200, 10150, 10400, 10350, 10700, 10400],
                    borderColor: '#0d6efd',
                    backgroundColor: 'rgba(13, 110, 253, 0.1)',
                    fill: true,
                    tension: 0.4
                },
                {
                    label: 'Drawdown',
                    data: [0, -0.5, -1.2, -0.8, -1.5, -0.5, -2.8],
                    borderColor: '#dc3545',
                    backgroundColor: 'rgba(220, 53, 69, 0.1)',
                    fill: true,
                    tension: 0.4,
                    yAxisID: 'y1'
                }
            ]
        };
        
        const performanceData = {
            labels: ['Win Rate', 'Profit Factor', 'Risk/Reward', 'Sharpe Ratio', 'Recovery Factor'],
            datasets: [{
                label: 'Performance',
                data: [0.7, 0.65, 0.8, 0.6, 0.5],
                fill: true,
                backgroundColor: 'rgba(13, 110, 253, 0.2)',
                borderColor: '#0d6efd',
                pointBackgroundColor: '#0d6efd',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: '#0d6efd'
            }]
        };
        
        // Init charts when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Equity Curve Chart
            const equityCtx = document.getElementById('equityCurveChart').getContext('2d');
            new Chart(equityCtx, {
                type: 'line',
                data: equityData,
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Balance ($)'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'Drawdown (%)'
                            },
                            grid: {
                                drawOnChartArea: false
                            }
                        }
                    }
                }
            });
            
            // Performance Radar Chart
            const performanceCtx = document.getElementById('performanceRadarChart').getContext('2d');
            new Chart(performanceCtx, {
                type: 'radar',
                data: performanceData,
                options: {
                    elements: {
                        line: {
                            borderWidth: 3
                        }
                    },
                    scales: {
                        r: {
                            angleLines: {
                                display: true
                            },
                            suggestedMin: 0,
                            suggestedMax: 1
                        }
                    }
                }
            });
            
            // Initialize Socket.IO
            const socket = io();
            
            socket.on('connect', function() {
                console.log('Connected to server');
            });
            
            socket.on('price_update', function(data) {
                console.log('Price update:', data);
                // Update UI with new price data
            });
            
            socket.on('position_update', function(data) {
                console.log('Position update:', data);
                // Update positions in UI
            });
            
            socket.on('bot_status', function(data) {
                console.log('Bot status update:', data);
                // Update bot status indicator
                const statusDot = document.querySelector('.status-dot');
                const statusText = document.querySelector('.status-text');
                const startBtn = document.getElementById('start-bot');
                const stopBtn = document.getElementById('stop-bot');
                
                if (data.running) {
                    statusDot.classList.add('active');
                    statusText.textContent = 'Running';
                    startBtn.disabled = true;
                    stopBtn.disabled = false;
                } else {
                    statusDot.classList.remove('active');
                    statusText.textContent = 'Stopped';
                    startBtn.disabled = false;
                    stopBtn.disabled = true;
                }
            });
            
            // Bot control buttons
            document.getElementById('start-bot').addEventListener('click', function() {
                socket.emit('bot_control', { action: 'start' });
            });
            
            document.getElementById('stop-bot').addEventListener('click', function() {
                socket.emit('bot_control', { action: 'stop' });
            });
            
            document.getElementById('restart-bot').addEventListener('click', function() {
                socket.emit('bot_control', { action: 'restart' });
            });
            
            // Close position buttons
            document.querySelectorAll('.close-position-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const positionId = this.getAttribute('data-position-id');
                    socket.emit('close_position', { position_id: positionId });
                });
            });
            
            // View all buttons
            document.getElementById('view-all-positions').addEventListener('click', function() {
                document.getElementById('positions-tab').click();
            });
            
            document.getElementById('view-all-trades').addEventListener('click', function() {
                document.getElementById('trades-tab').click();
            });
            
            // Save settings button
            document.getElementById('save-settings').addEventListener('click', function() {
                // Collect all settings and send to server
                alert('Settings saved successfully!');
            });
            
            // Test connection buttons
            document.getElementById('test-api-btn').addEventListener('click', function() {
                socket.emit('test_api');
            });
            
            document.getElementById('test-telegram-btn').addEventListener('click', function() {
                socket.emit('test_telegram');
            });
            
            document.getElementById('test-email-btn').addEventListener('click', function() {
                socket.emit('test_email');
            });
            
            // Backtest form submission
            document.getElementById('backtest-form').addEventListener('submit', function(e) {
                e.preventDefault();
                const form = this;
                const formData = new FormData(form);
                const params = {};
                
                for (let [key, value] of formData.entries()) {
                    params[key] = value;
                }
                
                socket.emit('run_backtest', params);
                
                // Show loading state
                document.getElementById('backtest-results').innerHTML = `
                    <div class="text-center py-5">
                        <div class="spinner-border text-primary mb-3" role="status">
                            <span class="visually-hidden">Loading...</span>
                        </div>
                        <p>Running backtest... This may take a minute.</p>
                    </div>
                `;
            });
            
            // Handle backtest results
            socket.on('backtest_results', function(data) {
                console.log('Backtest results:', data);
                // Update backtest results section with data
                // ...
            });
            
            // Toggle leverage options
            document.getElementById('use_leverage').addEventListener('change', function() {
                const leverageOptions = document.querySelector('.leverage-options');
                if (this.checked) {
                    leverageOptions.classList.remove('d-none');
                } else {
                    leverageOptions.classList.add('d-none');
                }
            });
        });
    </script>
</body>
</html>