
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Báo cáo hiệu suất ML</title>
            <style>
                body {
                    font-family: Arial, sans-serif;
                    line-height: 1.6;
                    margin: 0;
                    padding: 20px;
                    color: #333;
                }
                h1, h2, h3 {
                    color: #2c3e50;
                }
                table {
                    border-collapse: collapse;
                    width: 100%;
                    margin-bottom: 20px;
                }
                th, td {
                    border: 1px solid #ddd;
                    padding: 8px;
                    text-align: left;
                }
                th {
                    background-color: #f2f2f2;
                    font-weight: bold;
                }
                tr:nth-child(even) {
                    background-color: #f9f9f9;
                }
                .chart-container {
                    margin: 20px 0;
                    text-align: center;
                }
                .chart-container img {
                    max-width: 100%;
                    height: auto;
                    border: 1px solid #ddd;
                    box-shadow: 0 0 10px rgba(0,0,0,0.1);
                }
                .section {
                    margin-bottom: 30px;
                    border-bottom: 1px solid #eee;
                    padding-bottom: 20px;
                }
                .highlight {
                    background-color: #ffffcc;
                    padding: 2px 5px;
                    border-radius: 3px;
                }
            </style>
        </head>
        <body>
            <h1>Báo cáo hiệu suất Machine Learning</h1>
            <p>Thời gian báo cáo: 2025-03-01 16:50:45</p>
            <p>Tổng số mô hình phân tích: 11</p>
            
            <div class="section">
                <h2>Thông tin tổng quan</h2>
                <p>Danh sách các đồng tiền: BTCUSDT, unknown</p>
                <p>Danh sách các khung thời gian: 1h</p>
                <p>Danh sách các khoảng thời gian dữ liệu: 1_month, 1m, 3_months, 3m</p>
                <p>Danh sách các ngày dự đoán: 0, 1</p>
                <p>Danh sách các loại mô hình: gradient_boosting, random_forest, unknown</p>
            </div>
            
            <div class="section">
                <h2>So sánh hiệu suất theo khoảng thời gian dữ liệu</h2>
                <div class="chart-container">
                    <img src="../ml_charts/period_performance_comparison.png" alt="So sánh hiệu suất theo khoảng thời gian">
                </div>
                <table>
                    <tr>
                        <th>Khoảng thời gian</th>
                        <th>Số mô hình</th>
                        <th>Accuracy (trung bình)</th>
                        <th>Precision (trung bình)</th>
                        <th>Recall (trung bình)</th>
                        <th>F1-Score (trung bình)</th>
                    </tr>
        
                    <tr>
                        <td>1_month</td>
                        <td>1</td>
                        <td>0.5905</td>
                        <td>0.5972</td>
                        <td>0.5957</td>
                        <td>0.5899</td>
                    </tr>
            
                    <tr>
                        <td>1m</td>
                        <td>4</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>3_months</td>
                        <td>2</td>
                        <td>0.5534</td>
                        <td>0.5546</td>
                        <td>0.5542</td>
                        <td>0.5529</td>
                    </tr>
            
                    <tr>
                        <td>3m</td>
                        <td>4</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                </table>
                <p><strong>Nhận xét:</strong> Khoảng thời gian dữ liệu ảnh hưởng đáng kể đến hiệu suất của mô hình. 
                Dữ liệu dài hơn có thể cung cấp nhiều mẫu học tập hơn nhưng cũng có thể chứa nhiều biến động thị trường hơn.</p>
            </div>
            
            <div class="section">
                <h2>So sánh hiệu suất theo số ngày dự đoán</h2>
                <div class="chart-container">
                    <img src="../ml_charts/target_performance_comparison.png" alt="So sánh hiệu suất theo số ngày dự đoán">
                </div>
                <table>
                    <tr>
                        <th>Số ngày dự đoán</th>
                        <th>Số mô hình</th>
                        <th>Accuracy (trung bình)</th>
                        <th>Precision (trung bình)</th>
                        <th>Recall (trung bình)</th>
                        <th>F1-Score (trung bình)</th>
                    </tr>
        
                    <tr>
                        <td>0</td>
                        <td>8</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>1</td>
                        <td>3</td>
                        <td>0.5658</td>
                        <td>0.5688</td>
                        <td>0.5680</td>
                        <td>0.5652</td>
                    </tr>
            
                </table>
                <p><strong>Nhận xét:</strong> Số ngày dự đoán có ảnh hưởng rõ rệt đến độ chính xác của mô hình.
                Dự đoán ngắn hạn thường chính xác hơn dự đoán dài hạn do tính bất định của thị trường tăng lên theo thời gian.</p>
            </div>
            
            <div class="section">
                <h2>Top 10 mô hình tốt nhất</h2>
                <div class="chart-container">
                    <img src="../ml_charts/best_models.png" alt="Top 10 mô hình tốt nhất">
                </div>
                <table>
                    <tr>
                        <th>Đồng tiền</th>
                        <th>Timeframe</th>
                        <th>Khoảng thời gian</th>
                        <th>Số ngày dự đoán</th>
                        <th>Loại mô hình</th>
                        <th>Accuracy</th>
                        <th>F1-Score</th>
                    </tr>
        
                    <tr>
                        <td>BTCUSDT</td>
                        <td>1h</td>
                        <td>1_month</td>
                        <td>1</td>
                        <td>random_forest</td>
                        <td>0.5905</td>
                        <td>0.5899</td>
                    </tr>
            
                    <tr>
                        <td>BTCUSDT</td>
                        <td>1h</td>
                        <td>3_months</td>
                        <td>1</td>
                        <td>random_forest</td>
                        <td>0.5751</td>
                        <td>0.5747</td>
                    </tr>
            
                    <tr>
                        <td>BTCUSDT</td>
                        <td>1h</td>
                        <td>3_months</td>
                        <td>1</td>
                        <td>gradient_boosting</td>
                        <td>0.5318</td>
                        <td>0.5311</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>1m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>1m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>3m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>3m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>1m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>1m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                    <tr>
                        <td>unknown</td>
                        <td>1h</td>
                        <td>3m</td>
                        <td>0</td>
                        <td>unknown</td>
                        <td>0.0000</td>
                        <td>0.0000</td>
                    </tr>
            
                </table>
                <p><strong>Nhận xét:</strong> Các mô hình tốt nhất thường sử dụng kết hợp khung thời gian, khoảng thời gian dữ liệu và 
                số ngày dự đoán phù hợp với đặc điểm của đồng tiền cụ thể.</p>
            </div>
            
            <div class="section">
                <h2>Các đặc trưng quan trọng nhất</h2>
                <div class="chart-container">
                    <img src="../ml_charts/top_features.png" alt="Các đặc trưng quan trọng nhất">
                </div>
                <p><strong>Nhận xét:</strong> Các đặc trưng kỹ thuật quan trọng nhất trong dự đoán thường liên quan đến 
                các chỉ báo xu hướng và biến động. Những đặc trưng này xuất hiện nhất quán trên nhiều mô hình.</p>
            </div>
            
            <div class="section">
                <h2>Kết luận và khuyến nghị</h2>
                <p>
                    Qua phân tích hiệu suất của các mô hình ML, một số kết luận và khuyến nghị được đưa ra:
                </p>
                <ul>
                    <li>Khoảng thời gian dữ liệu tối ưu: <span class="highlight">{max(period_comparison.keys(), key=lambda p: period_comparison[p]['avg_f1_score'])}</span></li>
                    <li>Số ngày dự đoán tối ưu: <span class="highlight">{max(target_comparison.keys(), key=lambda d: target_comparison[d]['avg_f1_score'])}</span></li>
                    <li>Loại mô hình hiệu quả nhất: <span class="highlight">{max(self.summary['by_model_type'].keys(), key=lambda m: self.summary['by_model_type'][m]['avg_f1_score'])}</span></li>
                </ul>
                <p>
                    Các yếu tố ảnh hưởng đến hiệu suất dự đoán:
                </p>
                <ul>
                    <li>Độ biến động của thị trường ảnh hưởng lớn đến khả năng dự đoán</li>
                    <li>Dự đoán ngắn hạn (1 ngày) thường có độ chính xác cao hơn dự đoán dài hạn</li>
                    <li>Các chỉ báo kỹ thuật quan trọng nhất bao gồm: {', '.join([f[0] for f in feature_importance.get('top_features', [])[:5]])}</li>
                </ul>
            </div>
            
            <div>
                <p>© {datetime.now().year} BinanceTrader Bot - Báo cáo được tạo tự động</p>
            </div>
        </body>
        </html>
        